# Hydra Changelog

История изменений проекта для документирования в Гидропедии.

---

## [2025-02-03] Автоматическая синхронизация табеля о рангах

### Новое
- `src/lib/hierarchyConflictDetector.ts` — утилита обнаружения конфликтов иерархии
- `src/components/staff/ConflictResolutionDialog.tsx` — диалог разрешения противоречий

### Изменено
- `src/hooks/useRoleBehavior.ts` — добавлен `fetchAllBehaviors()` для загрузки всех иерархий
- `src/components/staff/RoleDetailsPanel.tsx` — интеграция проверки конфликтов при сохранении
- `src/components/patterns/BehaviorEditorDialog.tsx` — интеграция проверки конфликтов при сохранении
- `src/contexts/LanguageContext.tsx` — переводы для диалога конфликтов

### Как работает
При сохранении иерархии ролей система автоматически проверяет симметричность связей:
- `A.defers_to[B]` требует `B.challenges[A]` (начальник-подчинённый)
- `A.collaborates[B]` требует `B.collaborates[A]` (коллеги)

При обнаружении противоречий открывается диалог с предложением синхронизировать все затронутые роли в одной транзакции.

### Связанные разделы Гидропедии
- Штат специалистов → Табель о рангах
- Поведенческие паттерны → Редактор иерархии

---

## Формат записей

```markdown
## [YYYY-MM-DD] Название функции

### Новое
- `путь/к/файлу.ts` — краткое описание

### Изменено
- `путь/к/файлу.ts` — что изменено

### Удалено
- `путь/к/файлу.ts` — причина удаления

### Как работает
Техническое описание механизма работы в 2-4 предложениях.

### Связанные разделы Гидропедии
- Модуль → Раздел
```
