
## План: Расширение Гидропедии — недостающие секции

### Приоритет 1: Ключевые модули

#### 1. Секция «Задачи» (tasks)
**Иконка:** `ListTodo`

**Содержание:**
- Концепция сессий как контейнеров для диалогов
- Создание новой задачи (кнопка + Sheet-панель)
- Настройка моделей для сессии:
  - Мульти-селектор с категориями (Lovable AI, Free, Groq, Personal Keys)
  - Чекбоксы и «Выбрать все»
  - Per-model settings (роль, температура, системный промпт)
- Сохранение в `session_config`
- Переключение между задачами в сайдбаре

---

#### 2. Полный каталог AI-штата (roles-catalog)
**Иконка:** `Users`

**Содержание — все 11 ролей:**

| Роль | Иконка | Категория | Описание |
|------|--------|-----------|----------|
| Ассистент | `Brain` | Эксперт | Универсальный эксперт |
| Критик | `Shield` | Эксперт | Поиск слабых мест |
| Арбитр | `Scale` | Эксперт | Синтез и финальное решение |
| Консультант | `Lightbulb` | Эксперт | Разовая глубокая экспертиза |
| Модератор | `Gavel` | Эксперт | Управление дискуссией |
| Советник | `HandHelping` | Эксперт | Стратегические рекомендации |
| Аналитик | `LineChart` | Эксперт | Анализ данных и трендов |
| Веб-охотник | `Globe` | Эксперт | Поиск в интернете |
| Архивариус | `Archive` | Техперсонал | Систематизация информации |
| Промпт-инженер | `Wand2` | Техперсонал | Оптимизация промптов |
| Регулировщик потоков | `Route` | Техперсонал | Проектирование data-flow |

**Для каждой роли:**
- Название и иконка
- Краткое описание (1-2 предложения)
- Когда использовать (use cases)
- Дефолтный системный промпт

---

#### 3. Режим D-Chat Модератор (d-chat-moderator)
**Иконка:** `MessageSquareMore`

**Содержание:**
- Что такое режим Модератор в D-Chat
- Агрегация контекста сессии (все ответы экспертов)
- Формат структурированной сводки
- Копирование сводки в основной чат
- Позиционирование сводки (после блока ответов)

---

### Приоритет 2: Дополнения к существующим секциям

#### 4. Дополнить секцию Flow Editor
**Добавить:**
- Undo/Redo (`Ctrl+Z` / `Ctrl+Shift+Z`)
- Auto-layout (Dagre) — кнопка `LayoutGrid`
- Правила валидации соединений
- Экспорт в PDF/PNG
- Типы данных связей (цветовая кодировка)

---

#### 5. Дополнить секцию Инструменты (tools)
**Добавить:**
- Web Search (Tavily):
  - Как работает
  - Отображение источников
  - AI-генерируемый ответ + ссылки
- HTTP-инструменты:
  - SSRF-защита (валидация URL)
  - Таймауты и лимиты

---

### Приоритет 3: Технические секции

#### 6. Локализация (localization)
**Иконка:** `Languages`

**Содержание:**
- Поддержка RU/EN
- Переключатель языка в профиле
- Автоопределение языка браузера

---

#### 7. Безопасность и хранение ключей (security)
**Иконка:** `Lock`

**Содержание:**
- Vault для API-ключей (Supabase Vault)
- RLS-политики на уровне БД
- Изоляция данных пользователей

---

### Порядок реализации

| # | Секция | Сложность | Строк контента |
|---|--------|-----------|----------------|
| 1 | Каталог ролей | Средняя | ~150 строк |
| 2 | Задачи | Низкая | ~80 строк |
| 3 | D-Chat Модератор | Низкая | ~60 строк |
| 4 | Flow Editor (дополнение) | Низкая | ~40 строк |
| 5 | Инструменты (дополнение) | Низкая | ~50 строк |
| 6 | Локализация | Низкая | ~30 строк |
| 7 | Безопасность | Низкая | ~40 строк |

---

### Файлы для изменения

| Файл | Изменения |
|------|-----------|
| `src/content/hydrapedia.ts` | Добавить 4 новые секции + дополнить 2 существующие |
| `src/contexts/LanguageContext.tsx` | Добавить ключи переводов для новых секций |

---

### Результат

После реализации Гидропедия будет содержать:
- **12 основных секций** (вместо текущих 8)
- **100% покрытие** функционала платформы
- Полный справочник всех 11 AI-ролей
- Документацию технического стека
