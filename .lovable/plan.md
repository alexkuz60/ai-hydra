

# ะะปะฐะฝ: ะญะบะพะฝะพะผะธั ัะพะบะตะฝะพะฒ ะฟัะธ ะฟะพะฒัะพัะต + ะทะฐัะธัะฐ ะพั ัะปััะฐะนะฝะพะณะพ ัะฒะพะปัะฝะตะฝะธั

## ะกััั ะธะทะผะตะฝะตะฝะธะน

### 1. ะญะบะพะฝะพะผะธั ัะพะบะตะฝะพะฒ ะฟัะธ ะฟะพะฒัะพัะฝะพะผ ะทะฐะฟัะพัะต
ะะฝะพะฟะบะฐ "ะะตััะพะฝะฐะปัะฝัะน ะทะฐะฟัะพั" ัะถะต ะพัะฟัะฐะฒะปัะตั ะทะฐะฟัะพั **ัะพะปัะบะพ** ะพะดะฝะพะน ะผะพะดะตะปะธ โ ััะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ ะฒ ััะฝะบัะธะธ `retrySingleModel`. ะกะธััะตะผะฐ ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ ะธ ัะบะพะฝะพะผะธั ัะพะบะตะฝั.

### 2. ะะฐัะธัะฐ ะบะฝะพะฟะบะธ "ะฃะฒะพะปะธัั" ัะตะบ-ะฑะพะบัะพะผ
ะะพะฑะฐะฒะธัั ัะตะบ-ะฑะพะบั ะฟะพะดัะฒะตัะถะดะตะฝะธั ะฟะตัะตะด ะฐะบัะธะฒะฐัะธะตะน ะบะฝะพะฟะบะธ "ะฃะฒะพะปะธัั" ะดะปั ะฟัะตะดะพัะฒัะฐัะตะฝะธั ัะปััะฐะนะฝัั ะฝะฐะถะฐัะธะน.

---

## ะขะตะบััะตะต ะฟะพะฒะตะดะตะฝะธะต (1: ะะพะฒัะพัะฝัะน ะทะฐะฟัะพั)

ะัะพะฒะตัะบะฐ ะบะพะดะฐ ะฟะพะบะฐะทะฐะปะฐ:
- ะคัะฝะบัะธั `handleRetryRequest` ะฒ `ExpertPanel.tsx` ะฒัะทัะฒะฐะตั `retrySingleModel(modelId, lastUserMessage.content)`
- `retrySingleModel` ะฒ `useSendMessage.ts` ะพัะฟัะฐะฒะปัะตั ะทะฐะฟัะพั **ัะพะปัะบะพ** ัะบะฐะทะฐะฝะฝะพะน ะผะพะดะตะปะธ:
  ```typescript
  await callOrchestrator(messageContent, [], [singleModel]); // โ ะพะดะธะฝ ัะปะตะผะตะฝั ะฒ ะผะฐััะธะฒะต
  ```

**ะัะฒะพะด**: ะะพะฒัะพัะฝัะน ะทะฐะฟัะพั ัะถะต ัะบะพะฝะพะผะธั ัะพะบะตะฝั โ ะพัะฟัะฐะฒะปัะตััั ัะพะปัะบะพ "ะฟัะพะฒะธะฝะธะฒัะตะผััั" ัะบัะฟะตััั.

---

## ะขะตัะฝะธัะตัะบะพะต ะธะทะผะตะฝะตะฝะธะต (2: ะะฐัะธัะฐ ัะฒะพะปัะฝะตะฝะธั)

### ะคะฐะนะป: `src/components/warroom/MessageSkeleton.tsx`

**ะะพะฑะฐะฒะธัั ะปะพะบะฐะปัะฝัะน state ะดะปั ัะตะบ-ะฑะพะบัะฐ:**

```typescript
const [dismissConfirmed, setDismissConfirmed] = useState(false);
```

**ะะพะฑะฐะฒะธัั ัะตะบ-ะฑะพะบั ะธ ัะดะตะปะฐัั ะบะฝะพะฟะบั ะฝะตะฐะบัะธะฒะฝะพะน ะฑะตะท ะฟะพะดัะฒะตัะถะดะตะฝะธั:**

```tsx
// ะ ะฑะปะพะบะต timedout
<div className="flex flex-wrap items-center gap-2">
  {/* ะะฝะพะฟะบะฐ ะฟะพะฒัะพัะฐ */}
  <Button variant="default" size="sm" onClick={() => onRetry?.(pending.modelId)}>
    <RefreshCw className="h-3.5 w-3.5" />
    {t('skeleton.retryRequest')}
  </Button>
  
  {/* ะะฝะพะฟะบะฐ "ะะฐะฑััั" */}
  <Button variant="ghost" size="sm" onClick={() => onDismiss?.(pending.modelId)}>
    <X className="h-3.5 w-3.5" />
    {t('skeleton.dismiss')}
  </Button>
  
  {/* ะะฐะทะดะตะปะธัะตะปั */}
  <div className="flex items-center gap-1.5 ml-2">
    {/* ะงะตะบ-ะฑะพะบั ะฟะพะดัะฒะตัะถะดะตะฝะธั */}
    <Checkbox
      id={`dismiss-confirm-${pending.modelId}`}
      checked={dismissConfirmed}
      onCheckedChange={(checked) => setDismissConfirmed(checked === true)}
      className="h-3.5 w-3.5"
    />
    
    {/* ะะฝะพะฟะบะฐ "ะฃะฒะพะปะธัั" โ ะฐะบัะธะฒะฝะฐ ัะพะปัะบะพ ั ัะตะบ-ะฑะพะบัะพะผ */}
    <Button
      variant="outline"
      size="sm"
      onClick={() => onRemoveModel?.(pending.modelId)}
      disabled={!dismissConfirmed}
      className="gap-1.5 text-destructive border-destructive/50 hover:bg-destructive/10 disabled:opacity-40"
    >
      <UserMinus className="h-3.5 w-3.5" />
      {t('skeleton.removeModel')}
    </Button>
  </div>
</div>
```

**ะะธะทัะฐะปะธะทะฐัะธั:**

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ ะญะบัะฟะตัั claude-3-5-sonnet ัะฑะตะถะฐะป ะฝะฐ ะฟะตัะตะบัั..                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [๐ ะะตััะพะฝะฐะปัะฝัะน ะทะฐะฟัะพั]  [โ ะะฐะฑััั]    โ [๐ช ะฃะฒะพะปะธัั]           โ
โ                                          โ              โ          โ
โ                                      ัะตะบ-ะฑะพะบั     ะฝะตะฐะบัะธะฒะฝะฐ        โ
โ                                                                    โ
โ ะะพัะปะต ะบะปะธะบะฐ ะฝะฐ ัะตะบ-ะฑะพะบั:                                          โ
โ [๐ ะะตััะพะฝะฐะปัะฝัะน ะทะฐะฟัะพั]  [โ ะะฐะฑััั]    โ [๐ช ะฃะฒะพะปะธัั]           โ
โ                                          โ              โ          โ
โ                                      ะพัะผะตัะตะฝ       ะะะขะะะะ         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ะะผะฟะพััั

ะะพะฑะฐะฒะธัั ะฒ `MessageSkeleton.tsx`:
```typescript
import { Checkbox } from '@/components/ui/checkbox';
```

---

## ะะตะทัะปััะฐั

1. **ะญะบะพะฝะพะผะธั ัะพะบะตะฝะพะฒ**: ะะพะดัะฒะตัะถะดะตะฝะพ โ ะฟะพะฒัะพัะฝัะน ะทะฐะฟัะพั ะพัะฟัะฐะฒะปัะตััั ัะพะปัะบะพ ะพะดะฝะพะน ะผะพะดะตะปะธ (ัะถะต ัะฐะฑะพัะฐะตั)
2. **ะะฐัะธัะฐ ะพั ัะปััะฐะนะฝะพะณะพ ัะฒะพะปัะฝะตะฝะธั**: ะะฝะพะฟะบะฐ "ะฃะฒะพะปะธัั" ะฝะตะฐะบัะธะฒะฝะฐ ะดะพ ะพัะผะตัะบะธ ัะตะบ-ะฑะพะบัะฐ
3. **UX**: ะงะตะบ-ะฑะพะบั ะฒะธะทัะฐะปัะฝะพ ัะฒัะทะฐะฝ ั ะบะฝะพะฟะบะพะน, ะธะฝััะธัะธะฒะฝะพ ะฟะพะฝััะฝะพ, ััะพ ััะพ ะฟะพะดัะฒะตัะถะดะตะฝะธะต

