
# –ü–ª–∞–Ω: –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é (–¥–∏–∞–ª–æ–≥ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, –∫–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è) –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç –ü–∞–Ω–µ–ª–∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ D-—á–∞—Ç–µ (ConsultantPanel).

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- **ExpertPanel** —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useSessionMemory` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- **ExpertPanel** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –±–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- **ConsultantPanel** –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: –∫–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∫–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –¥–∏–∞–ª–æ–≥ SessionMemoryDialog

## –ß—Ç–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ

1. **–ö–Ω–æ–ø–∫–∞ "–û—Å–≤–µ–∂–∏—Ç—å –ø–∞–º—è—Ç—å"** ‚Äî –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–∞–º—è—Ç–∏
2. **–ö–Ω–æ–ø–∫–∞ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é"** ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ SessionMemoryDialog
3. **–î–∏–∞–ª–æ–≥ SessionMemoryDialog** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤

## –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ

–ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —á–∞—Ç–∞ —Ä—è–¥–æ–º —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø–∞–º—è—Ç–∏:

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üéØ –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏   üß† 5  ‚Üª  ‚öôÔ∏è    ‚ö° Streaming  ‚¨õ ‚îÇ
‚îÇ                           ‚Üë   ‚Üë                     ‚îÇ
‚îÇ                   Refresh  Manage                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –®–∞–≥ 1: –†–∞—Å—à–∏—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ useSessionMemory

–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ ExpertPanel:

```typescript
// –î–æ (—Å—Ç—Ä–æ–∫–∞ 97)
const { deleteByMessageId } = useSessionMemory(currentTask?.id || null);

// –ü–æ—Å–ª–µ
const { 
  deleteByMessageId,
  chunks,
  refetch: refetchMemory,
  isLoading: memoryLoading,
  deleteChunk,
  clearSessionMemory,
  isDeleting: memoryDeleting,
  isClearing: memoryClearing,
  getStats: getMemoryStats,
} = useSessionMemory(currentTask?.id || null);
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```typescript
const [memoryRefreshed, setMemoryRefreshed] = useState(false);
const [memoryDialogOpen, setMemoryDialogOpen] = useState(false);
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏

```typescript
const handleRefreshMemory = useCallback(async () => {
  await refetchMemory();
  setMemoryRefreshed(true);
  setTimeout(() => setMemoryRefreshed(false), 2000);
}, [refetchMemory]);
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç SessionMemoryDialog –∏ –∏–∫–æ–Ω–æ–∫

```typescript
import { SessionMemoryDialog } from '@/components/warroom/SessionMemoryDialog';
import { RefreshCw, Check, Settings2 } from 'lucide-react';
```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ (Task Header)

–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –≤ –æ–±–ª–∞—Å—Ç—å –º–µ–∂–¥—É –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø–∞–º—è—Ç–∏ –∏ Streaming Controls:

```tsx
{/* Memory Controls */}
{memoryStats && memoryStats.total > 0 && (
  <>
    {/* Refresh Memory Button */}
    <Tooltip>
      <TooltipTrigger asChild>
        <motion.button onClick={handleRefreshMemory} ...>
          {/* Animated refresh/check icon */}
        </motion.button>
      </TooltipTrigger>
      <TooltipContent side="bottom">
        {memoryRefreshed ? t('memory.refreshed') : t('memory.refresh')}
      </TooltipContent>
    </Tooltip>
    
    {/* Manage Memory Button */}
    <Tooltip>
      <TooltipTrigger asChild>
        <Button onClick={() => setMemoryDialogOpen(true)} ...>
          <Settings2 />
        </Button>
      </TooltipTrigger>
      <TooltipContent side="bottom">{t('memory.manageMemory')}</TooltipContent>
    </Tooltip>
  </>
)}
```

### –®–∞–≥ 6: –î–æ–±–∞–≤–∏—Ç—å SessionMemoryDialog –≤ JSX

–í –∫–æ–Ω–µ—Ü –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º `</Layout>`):

```tsx
<SessionMemoryDialog
  open={memoryDialogOpen}
  onOpenChange={setMemoryDialogOpen}
  chunks={chunks}
  isLoading={memoryLoading}
  isDeleting={memoryDeleting}
  onDeleteChunk={deleteChunk}
  onClearAll={clearSessionMemory}
  isClearing={memoryClearing}
/>
```

---

## –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `src/pages/ExpertPanel.tsx` | –†–∞—Å—à–∏—Ä–∏—Ç—å —Ö—É–∫ useSessionMemory, –¥–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–Ω–æ–ø–∫–∏ –∏ –¥–∏–∞–ª–æ–≥ |

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç:
1. –í–∏–¥–µ—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –ø–∞–º—è—Ç–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —á–∞—Ç–∞
2. –û–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–∞–º—è—Ç–∏ –∫–Ω–æ–ø–∫–æ–π —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
3. –û—Ç–∫—Ä—ã–≤–∞—Ç—å –¥–∏–∞–ª–æ–≥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, –ø–æ–∏—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏ —É–¥–∞–ª–µ–Ω–∏—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
4. –£–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–π –ø–∞–º—è—Ç—å—é —Å–µ—Å—Å–∏–∏ –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞, –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—è—Å—å –≤ D-—á–∞—Ç
