
# Прототип интерфейса «Подиум конкурса»

## Общая идея

Вкладка «Подиум конкурса» (которая сейчас — заглушка с иконкой Trophy) превращается в полноценный пошаговый интерфейс проведения конкурса. Это wizard из трёх этапов, каждый оформлен как отдельный блок внутри скроллируемой области.

---

## Структура интерфейса (3 секции-шага)

```text
+----------------------------------------------------------+
| Подиум конкурса                                          |
+----------------------------------------------------------+
| ШАГ 1: УЧАСТНИКИ И ЗАДАЧА                                |
| +------------------------------------------------------+ |
| | Задача: [выпадающий список задач пользователя]       | |
| | Описание задачи: (отображается после выбора)          | |
| | Прикрепленные файлы: (список, если есть)              | |
| +------------------------------------------------------+ |
| | Участники подиума:                                    | |
| | [Модель A / Эксперт]  [Модель B / Критик]  ...       | |
| | (карточки приглашённых моделей с ролями)               | |
| +------------------------------------------------------+ |
|                                                          |
| ШАГ 2: ПРАВИЛА КОНКУРСА                                  |
| +------------------------------------------------------+ |
| | Количество туров: [1] [2] [3] (переключатель)        | |
| | Тур 1: Тип задания — [Свободный промпт / По роли]    | |
| |        Промпт: [текстовое поле]                      | |
| |        Критерии оценки: [чекбоксы]                   | |
| | Тур 2: (если выбрано >1 тура, аналогично)             | |
| | Правило выбывания: [Худшие N% / Ниже порога / Ручной] | |
| +------------------------------------------------------+ |
|                                                          |
| ШАГ 3: ПРЕДПРОСМОТР И ЗАПУСК                             |
| +------------------------------------------------------+ |
| | Сводка: N моделей, M туров, Задача "..."              | |
| | [Начать конкурс] — кнопка (пока неактивна)           | |
| +------------------------------------------------------+ |
+----------------------------------------------------------+
```

---

## Детали каждой секции

### Секция 1: Участники и Задача

- **Селектор задачи** — выпадающий список из существующих задач пользователя (из таблицы `sessions`). После выбора отображается название и описание задачи.
- **Файлы задачи** — здесь будет блок-заглушка «Прикрепленные файлы» с пометкой, что функция прикрепления файлов к задаче будет добавлена в панель Задач позже.
- **Карточки участников** — горизонтальная лента приглашённых на подиум моделей (из `contestModels` в localStorage). Каждая карточка содержит: логотип провайдера, имя модели, назначенная роль (бейдж). Если моделей нет — сообщение «Пригласите моделей на вкладке Кандидаты».

### Секция 2: Правила конкурса

- **Количество туров** — переключатель 1/2/3 (кнопки-тоглы).
- **Настройки каждого тура**:
  - Тип задания: «Свободный промпт» или «По шаблону роли»
  - Текстовое поле для промпта
  - Критерии оценки: чекбоксы (Точность, Полнота, Креативность, Структурированность, Практичность)
- **Правило прохождения** — как модели проходят между турами:
  - «Все проходят» (для 1 тура)
  - «Худшие N% выбывают»
  - «Ниже порога X баллов»
  - «Ручной отбор»
- Все настройки — только UI, сохраняются в localStorage, без бэкенда.

### Секция 3: Предпросмотр и запуск

- Сводка: количество участников, туров, название задачи.
- Кнопка «Начать конкурс» — с иконкой Play, стилизованная `hydra-glow-sm`. На этом этапе кнопка заблокирована с подсказкой «Функция запуска будет доступна позже».

---

## Технический план

### Новые файлы

1. **`src/components/ratings/ContestPodium.tsx`** — основной компонент вкладки «Подиум конкурса», заменяет текущую заглушку в `BeautyContest.tsx`. Содержит три секции-карточки (HydraCard) со скроллом.

2. **`src/components/ratings/ContestTaskSelector.tsx`** — секция 1: селектор задачи + карточки участников. Задачи загружаются из базы данных. Участники читаются из `localStorage` ключ `hydra-contest-models`.

3. **`src/components/ratings/ContestRulesEditor.tsx`** — секция 2: настройки туров и правил. Чистый UI-state, сохраняется в `localStorage` ключ `hydra-contest-rules`.

4. **`src/components/ratings/ContestSummary.tsx`** — секция 3: сводка и кнопка запуска (заглушка).

### Изменяемые файлы

5. **`src/components/ratings/BeautyContest.tsx`** — подключение `ContestPodium` вместо текущего placeholder в `TabsContent value="arena"`.

### Работа с данными

- Задачи — запрос к `sessions` через Supabase (аналогично странице Tasks).
- Участники — чтение `hydra-contest-models` из localStorage.
- Правила конкурса — localStorage ключ `hydra-contest-rules` (JSON с настройками туров).
- Никаких новых таблиц в БД на этом этапе не создаётся.

### Персистентность

Все состояния прототипа сохраняются в localStorage:
- `hydra-contest-task-id` — выбранная задача
- `hydra-contest-rules` — настройки туров и правил
- `hydra-contest-models` — участники (уже существует)
