
# –ü–ª–∞–Ω: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ D-—á–∞—Ç–∞ –≤ –ü–∞–Ω–µ–ª—å —ç–∫—Å–ø–µ—Ä—Ç–æ–≤

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —á–∞—Ç–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–Ω–µ–ª–∏ "D-—á–∞—Ç" (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —á–∞—Ç) —Å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º. –ü–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∏–∑–º–µ–Ω—è–µ–º—É—é —à–∏—Ä–∏–Ω—É —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```text
+----------------+---------------------------+------------------+
|  ChatTreeNav   |      –û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç         |     D-–ß–∞—Ç        |
|  (—Ä–µ–∑–∞–π–∑)      |      (—Å–æ–æ–±—â–µ–Ω–∏—è)          |  (–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç)   |
|                |                           |                  |
|  15-35%        |      ~60-70%              |  3rem-30%        |
|                |                           |  (—Ä–µ–∑–∞–π–∑)        |
+----------------+---------------------------+------------------+
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å D-—á–∞—Ç–∞

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| –í–µ–±-–ø–æ–∏—Å–∫ | –ó–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º web_search |
| –ó–∞–ø—Ä–æ—Å –∫ –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É | –ó–∞–ø—Ä–æ—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ —Å —Ä–æ–ª—å—é assistant |
| –ó–∞–ø—Ä–æ—Å –∫ –ö—Ä–∏—Ç–∏–∫—É | –ó–∞–ø—Ä–æ—Å –∫ –º–æ–¥–µ–ª–∏ —Å —Ä–æ–ª—å—é critic |
| –ó–∞–ø—Ä–æ—Å –∫ –ê—Ä–±–∏—Ç—Ä—É | –ó–∞–ø—Ä–æ—Å –∫ –º–æ–¥–µ–ª–∏ —Å —Ä–æ–ª—å—é arbiter |

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: ConsultantPanel.tsx

–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è D-—á–∞—Ç–∞:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ –∫–Ω–æ–ø–∫–æ–π —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –∑–∞–ø—Ä–æ—Å–∞
- –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (–≤–µ–±-–ø–æ–∏—Å–∫, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç, –∫—Ä–∏—Ç–∏–∫, –∞—Ä–±–∏—Ç—Ä)
- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã tool_calls)

### 2. –•—É–∫: useConsultantPanelWidth.ts

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∏—Ä–∏–Ω–æ–π –ø–∞–Ω–µ–ª–∏ —Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –≤ localStorage
- –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 3rem (48px) ‚Äî —Ä–∞–≤–Ω–æ —à–∏—Ä–∏–Ω–µ —Å—Ö–ª–æ–ø–Ω—É—Ç–æ–≥–æ –º–µ–Ω—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

### 3. –•—É–∫: useConsultantChat.ts

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º D-—á–∞—Ç–∞:
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ (–Ω–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º —á–∞—Ç–æ–º)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ hydra-orchestrator —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Ä–æ–ª—å—é
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ tool_calls

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ExpertPanel.tsx

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è D-—á–∞—Ç–∞:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–π ResizablePanel —Å–ø—Ä–∞–≤–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ minSize/maxSize –¥–ª—è D-—á–∞—Ç–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–≤—ë—Ä–Ω—É—Ç–æ—Å—Ç–∏ (3rem = —Ç–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∞)

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∫–µ–Ω–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π D-—á–∞—Ç–∞, —á—Ç–æ–±—ã –Ω–µ —Å–º–µ—à–∏–≤–∞—Ç—å —Å –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π.

## UI D-—á–∞—Ç–∞

```text
+---------------------------+
|  D-–ß–∞—Ç            [‚Äî][√ó]  |  <- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —Å–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å
+---------------------------+
|  [üîç –ü–æ–∏—Å–∫] [üë§ –≠–∫—Å–ø.]    |  <- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤
|  [üõ°Ô∏è –ö—Ä–∏—Ç.] [‚öñÔ∏è –ê—Ä–±.]     |
+---------------------------+
|  –ú–æ–¥–µ–ª—å: [Gemini 2.5 ‚ñº]   |  <- –°–µ–ª–µ–∫—Ç–æ—Ä –º–æ–¥–µ–ª–∏
+---------------------------+
|                           |
|  –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π        |  <- –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º–∞—è –æ–±–ª–∞—Å—Ç—å
|  –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞             |
|                           |
+---------------------------+
|  [–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å...]  [‚Üí] |  <- –ü–æ–ª–µ –≤–≤–æ–¥–∞
+---------------------------+
```

### –°–≤—ë—Ä–Ω—É—Ç—ã–π –≤–∏–¥ (3rem = 48px)

```text
+----+
| üí° |  <- –ò–∫–æ–Ω–∫–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞
+----+
| üîç |  <- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–∏—Å–∫—É
| üë§ |  <- –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—Ä–æ—Å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É
| üõ°Ô∏è |  <- –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—Ä–æ—Å –∫ –∫—Ä–∏—Ç–∏–∫—É
| ‚öñÔ∏è |  <- –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—Ä–æ—Å –∫ –∞—Ä–±–∏—Ç—Ä—É
+----+
```

## –ü–æ—Ä—è–¥–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤

1. `src/hooks/useConsultantPanelWidth.ts` ‚Äî —Ö—É–∫ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —à–∏—Ä–∏–Ω—ã
2. `src/hooks/useConsultantChat.ts` ‚Äî —Ö—É–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–∞—Ç–∞
3. `src/components/warroom/ConsultantPanel.tsx` ‚Äî UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç D-—á–∞—Ç–∞
4. `src/pages/ExpertPanel.tsx` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç—Ä–µ—Ç—å–µ–π –ø–∞–Ω–µ–ª–∏
5. `src/contexts/LanguageContext.tsx` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –•—Ä–∞–Ω–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –ø–∞–Ω–µ–ª–∏

```typescript
// useConsultantPanelWidth.ts
const STORAGE_KEY = 'hydra-dchat-panel-width';
const DEFAULT_WIDTH = 3; // –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç ~48px –º–∏–Ω–∏–º—É–º—É

function useConsultantPanelWidth() {
  const [width, setWidth] = useState<number>(() => {
    const stored = localStorage.getItem(STORAGE_KEY);
    return stored ? parseFloat(stored) : DEFAULT_WIDTH;
  });
  
  const saveWidth = useCallback((newWidth: number) => {
    setWidth(newWidth);
    localStorage.setItem(STORAGE_KEY, String(newWidth));
  }, []);
  
  return { width, saveWidth };
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞

```typescript
interface ConsultantMessage {
  id: string;
  role: 'user' | 'consultant';
  content: string;
  mode: 'web_search' | 'expert' | 'critic' | 'arbiter';
  model_name: string | null;
  tool_calls?: ToolCall[];
  tool_results?: ToolResult[];
  created_at: string;
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExpertPanel

```typescript
<ResizablePanelGroup direction="horizontal">
  {/* –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å–ª–µ–≤–∞ */}
  <ResizablePanel defaultSize={20} minSize={15} maxSize={35}>
    <ChatTreeNav ... />
  </ResizablePanel>
  
  <ResizableHandle withHandle />
  
  {/* –û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç */}
  <ResizablePanel defaultSize={65}>
    {/* –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
  </ResizablePanel>
  
  <ResizableHandle withHandle />
  
  {/* D-–ß–∞—Ç —Å–ø—Ä–∞–≤–∞ */}
  <ResizablePanel 
    defaultSize={consultantWidth}
    minSize={3}  // ~48px, —à–∏—Ä–∏–Ω–∞ —Å—Ö–ª–æ–ø–Ω—É—Ç–æ–≥–æ –º–µ–Ω—é
    maxSize={30}
    onResize={saveConsultantWidth}
  >
    <ConsultantPanel ... />
  </ResizablePanel>
</ResizablePanelGroup>
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç:
1. –û—Ç–∫—Ä—ã–≤–∞—Ç—å D-—á–∞—Ç —Å–ø—Ä–∞–≤–∞ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
2. –í—ã–ø–æ–ª–Ω—è—Ç—å –≤–µ–±-–ø–æ–∏—Å–∫ –±–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
3. –ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –º–Ω–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π –ò–ò (—ç–∫—Å–ø–µ—Ä—Ç, –∫—Ä–∏—Ç–∏–∫, –∞—Ä–±–∏—Ç—Ä)
4. –ò–∑–º–µ–Ω—è—Ç—å —à–∏—Ä–∏–Ω—É –ø–∞–Ω–µ–ª–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º
5. –°–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –¥–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (–∏–∫–æ–Ω–∫–∏)
6. –®–∏—Ä–∏–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
